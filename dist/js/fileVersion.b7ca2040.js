(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fileVersion"],{"470b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-full p-4"},[t.loading?a("DMSItemsSkeleton"):[a("a",{ref:"download",staticClass:"hidden",attrs:{download:""}}),a("div",{staticClass:"text-right mb-3"},[a("input",{ref:"input",staticClass:"hidden",attrs:{type:"file"},on:{change:t.onNewVersion}}),a("button",{staticClass:"text-gray-400 font-semibold",on:{click:function(e){return t.$refs.input.click()}}},[a("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:"plus"}}),a("span",[t._v("New version")])],1)]),t._l(t.fileData.versions,(function(e){return a("button",{key:e.version,staticClass:"flex my-1 bg-gray-200 hover:bg-gray-300 border-2 border-gray-300 rounded overflow-hidden w-full",on:{click:function(a){return t.downloadVersion(e.version)}}},[a("DMSTooltip",{staticClass:"w-1.5 self-stretch",attrs:{position:"right"},scopedSlots:t._u([{key:"activator",fn:function(){return[a("div",{staticClass:"w-full h-full",class:[t.colors[e.status]]})]},proxy:!0}],null,!0)},[a("span",[t._v(t._s(e.status))])]),a("div",{staticClass:"flex items-center flex-grow px-2 py-1"},[a("div",{staticClass:"text-left"},[a("p",{staticClass:"font-medium"},[t._v("Version: "+t._s(e.version))]),a("p",{staticClass:"text-xs text-gray-400"},[t._v("Download")])]),a("div",{staticClass:"ml-auto text-right"},[a("p",[t._v(t._s(e.modifiedBy))]),a("p",{staticClass:"text-xs font-light"},[t._v(" "+t._s(t._f("date")(e.date))+" ")])])])],1)}))]],2)},n=[],i=a("fa7d"),o=a("bfef"),l=a("eeaf"),r=a("604e"),c={components:{DMSTooltip:o["a"],DMSItemsSkeleton:l["a"]},name:"DMSFileVersion",props:{file:{type:String,required:!0}},data:()=>({loading:!0,fileData:{},colors:{deleted:"bg-red-500",active:"bg-green-400",expiring:"bg-yellow-400"}}),watch:{file:{immediate:!0,handler:function(){this.getFileData()}}},methods:{getFileData:async function(){this.loading=!0,this.fileData=await Object(r["k"])(this.file),this.loading=!1},onNewVersion:async function(){const t=this.$refs.input.files[0];this.loading=!0;try{this.fileData=await Object(r["e"])(this.file,t),this.$emit("version",this.fileData.version)}catch(e){this.$alert(e)}this.loading=!1},downloadVersion:async function(t){try{const e=await Object(r["g"])(this.file,t),a=this.$refs.download;a.href=URL.createObjectURL(e),a.download=e.name,a.click()}catch(e){this.$alert(e)}}},filters:{date:i["a"]}},u=c,d=a("2877"),f=Object(d["a"])(u,s,n,!1,null,null,null);e["default"]=f.exports},bfef:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._g({staticClass:"relative",on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave}},t.$listeners),[a("div",{staticClass:"absolute bg-black bg-opacity-60 rounded text-white px-2 py-1 whitespace-nowrap text-sm z-40 pointer-events-none transition-all ease-in-out duration-200",class:[t.show?"opacity-1":"opacity-0"],style:t.styles},[t._t("default",(function(){return[t._v("Tooltip")]}))],2),t._t("activator")],2)},n=[],i={name:"DMSTooltip",props:{position:{type:String,default:"top"}},data:()=>({show:!1}),computed:{styles:function(){const t={top:{top:"calc(-100% - 5px)",left:"50%",transform:"translateX(-50%)"},right:{top:"50%",left:"calc(100% + 5px)",transform:"translateY(-50%)"},bottom:{top:"calc(100% + 5px)",left:"50%",transform:"translateX(-50%)"},left:{top:"50%",right:"calc(100% + 5px)",transform:"translateY(-50%)"}};return t[this.position]}},methods:{onMouseEnter:function(){this.show=!0},onMouseLeave:function(){this.show=!1}}},o=i,l=a("2877"),r=Object(l["a"])(o,s,n,!1,null,"29cea0f1",null);e["a"]=r.exports},c4fb:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"h-full p-4"},[t.loading?a("DMSItemsSkeleton"):t._l(t.metadata,(function(e){return a("div",{key:e.name,staticClass:"flex items-center px-2 py-1 my-1 bg-gray-200 border-2 border-gray-300 rounded"},[a("div",{staticClass:"text-lg font-medium w-1/3 flex-shrink-0"},[t._v(t._s(e.name))]),a("div",{staticClass:"flex-grow"},[e.link?a("a",{staticClass:"border border-gray-300 rounded px-2 py-0.5 cursor-pointer flex items-center",attrs:{href:e.value,target:"_blank"}},[a("span",{staticClass:"mr-auto"},[t._v("Link")]),a("font-awesome-icon",{attrs:{icon:"external-link-alt"}})],1):a("div",{staticClass:"flex items-center"},[a("DMSInput",{staticClass:"flex-grow bg-gray-200 focus:bg-white",on:{keydown:[function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.saveMetadata(e)},function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:t.clearMetadata(e)}]},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"md.value"}}),a("div",{staticClass:"flex-shrink-0 flex items-center gap-2 pl-1 transition-all duration-300 ease-in-out",class:[e.value!==e.originalValue?"w-12 opacity-1":"w-0 opacity-0"]},[e.saving?a("font-awesome-icon",{staticClass:"ml-2 animate-spin",attrs:{icon:"spinner"}}):t._l(t.buttons,(function(s){return a("DMSTooltip",{scopedSlots:t._u([{key:"activator",fn:function(){return[a("button",{staticClass:"px-1 h-full leading-none",on:{click:function(t){return s.click(e)}}},[a("font-awesome-icon",{attrs:{icon:s.icon}})],1)]},proxy:!0}],null,!0)},[a("span",[t._v(t._s(s.tooltip))])])}))],2)],1)])])}))],2)},n=[],i=a("eeaf"),o=a("572b"),l=a("604e"),r=a("bfef"),c={components:{DMSItemsSkeleton:i["a"],DMSInput:o["a"],DMSTooltip:r["a"]},name:"DMSFileMetadata",props:{file:{type:String,required:!0}},data:()=>({loading:!1,md:[]}),computed:{metadata:{get(){return this.md},set(t){this.md=[...t].map(t=>({...t,originalValue:t.originalValue||t.value,saving:t.saving||!1}))}},buttons:function(){return[{icon:"check",tooltip:"Save",click:this.saveMetadata},{icon:"times",tooltip:"Clear",click:this.clearMetadata}]}},watch:{file:{immediate:!0,handler:function(){this.getMetadata()}}},methods:{getMetadata:async function(){this.loading=!0;try{const{metadata:t}=await Object(l["j"])(this.file);this.metadata=t}catch(t){this.$alert(t)}this.loading=!1},saveMetadata:async function(t){t.saving=!0;try{const e=await Object(l["l"])(this.file,t.name,t.value),a=[...this.metadata],s=a.findIndex(e=>e===t);a.splice(s,1,e),this.metadata=a}catch(e){this.$alert(e)}t.saving=!1},clearMetadata:function(t){t.value=t.originalValue}}},u=c,d=a("2877"),f=Object(d["a"])(u,s,n,!1,null,"4d9eda99",null);e["default"]=f.exports},eeaf:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(Array(t.number),(function(t,e){return a("div",{key:e,staticClass:"flex my-1 bg-gray-300 border-2 border-gray-300 rounded overflow-hidden h-14 animate-pulse z-10"})})),0)},n=[],i={name:"DMSItemsSkeleton",props:{number:{type:Number,default:4}}},o=i,l=a("2877"),r=Object(l["a"])(o,s,n,!1,null,"68b91cf2",null);e["a"]=r.exports}}]);
//# sourceMappingURL=fileVersion.b7ca2040.js.map