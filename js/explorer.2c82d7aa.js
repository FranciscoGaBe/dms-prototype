(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["explorer"],{ba99:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-full flex"},[s("DMSLeftBar",{ref:"leftBar",staticClass:"flex-shrink-0"}),s("DMSFileExplorer",{staticClass:"flex-grow",attrs:{folder:t.folder,file:t.file},on:{favorite:t.onFavorite}}),s("DMSAlert",{ref:"alert"})],1)},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-full flex"},[s("div",{staticClass:"flex-grow h-full flex flex-col pt-4 md:pl-4"},[s("div",{staticClass:"pb-1 border-b-2 pl-2 pr-2 md:pr-8 border-gray-300 flex-shrink-0 flex items-center"},[s("div",{class:{"animate-pulse text-gray-400 bg-gray-400 rounded":t.loading}},[t.folderData.parentName?[s("span",{staticClass:"text-sm font-medium cursor-pointer",on:{click:function(e){return t.goTo(t.folderData.parent)}}},[t._v(t._s(t.folderData.parentName))]),s("span",{staticClass:"mx-2 text-sm"},[s("font-awesome-icon",{attrs:{icon:"chevron-right"}})],1)]:t._e(),s("span",{staticClass:"text-3xl font-bold uppercase"},[t._v(" "+t._s(t.folderData.folder)+" ")])],2),s("DMSAdvanceSearch",{staticClass:"ml-auto"}),t.isSearch?t._e():[s("DMSFileUpload",{attrs:{folder:t.folderId},on:{finished:t.getFolderData}}),s("DMSNewFolder",{attrs:{parent:t.folder},on:{newFolder:t.getFolderData}})]],2),t.loading?s("DMSItemsSkeleton",{staticClass:"px-2 md:px-4 py-2",attrs:{number:10}}):t.numberOfItems?[s("div",{staticClass:"px-2 md:px-4 py-2 flex-grow overflow-auto"},[t._l(t.folderData.folders,(function(e){return s("DMSFileExplorerItem",{key:e.id,attrs:{item:e,folder:"",items:t.folderData.folders},on:{selectFolder:t.selectFolder,favorite:function(e){return t.onFavorite(e,"folder")}}})})),t._l(t.folderData.files,(function(e){return s("DMSFileExplorerItem",{key:e.id,attrs:{item:e,items:t.folderData.files},on:{selectFile:t.selectFile,favorite:function(e){return t.onFavorite(e,"file")}}})}))],2)]:s("div",{staticClass:"flex items-center justify-center h-full text-gray-400 text-center"},[s("div",[s("font-awesome-icon",{staticClass:"text-8xl",attrs:{icon:t.isSearch?"search":"folder-open"}}),s("p",{staticClass:"font-bold text-2xl mt-4"},[t._v(" "+t._s(t.isSearch?"No search results":"Nothing inside this folder")+" ")])],1)])],2),s("DMSFileExplorerDetails",{staticClass:"flex-shrink-0",attrs:{file:t.file,files:t.folderData.files}})],1)},n=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white my-2 pr-2 rounded shadow flex items-center cursor-pointer hover:bg-blue-100 transition-all duration-300 ease-in-out",on:{click:t.selectItem,mouseenter:function(e){t.hovering=!0},mouseleave:function(e){t.hovering=!1}}},[s("div",{staticClass:"text-blue-500 text-2xl md:text-4xl w-10 md:w-16 text-center"},[s("font-awesome-icon",{attrs:{icon:t.icon}})],1),s("div",{staticClass:"py-1"},[s("div",{staticClass:"text-xl font-medium mb-1"},[t._v(t._s(t.item.name))]),t.folder?t._e():s("div",{staticClass:"text-sm text-gray-700"},[t._v(" Version: "+t._s(t.item.version)+" ")]),s("div",{staticClass:"text-xs text-gray-600"},[s("span",[t._v("Modified: "+t._s(t._f("date")(t.item.modified)))]),t.folder?t._e():s("span",{staticClass:"hidden md:inline"},[t._v(" - Size: "+t._s(t._f("size")(t.item.size)))])])]),s("div",{staticClass:"ml-auto text-xl px-2 py-2",class:[t.item.favorite?"text-yellow-300":"text-gray-300"],on:{"!click":function(e){return e.stopPropagation(),t.setFavorite.apply(null,arguments)}}},[s("font-awesome-icon",{attrs:{icon:"star"}})],1),s("DMSElementMenu",{attrs:{folder:t.folder,item:t.item,items:t.items},on:{delete:t.onDelete},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.on;return[s("div",{staticClass:"px-3 py-2 text-2xl text-blue-600",on:{"!click":function(t){return t.stopPropagation(),e.click.apply(null,arguments)}}},[s("font-awesome-icon",{attrs:{icon:"ellipsis-v"}})],1)]}}])})],1)},r=[],c=s("fa7d"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}],ref:"container",staticClass:"relative"},[t._t("default",null,{on:{click:t.toggleMenu}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"bg-white absolute rounded border-2 border-gray-200 shadow w-44 overflow-hidden",class:[t.top?"top-0":"bottom-0"],staticStyle:{right:"120%"}},[t.folder?t._e():[t._l(t.buttons,(function(e){return s("div",{key:e.name,staticClass:"py-1 flex items-center w-full hover:text-blue-300 cursor-pointer",on:{"!click":function(s){return s.stopPropagation(),t.goTo(e.route)}}},[s("div",{staticClass:"text-center w-8"},[s("font-awesome-icon",{attrs:{icon:e.icon}})],1),s("div",[t._v(t._s(e.name))])])})),t.items.length?s("div",{staticClass:"border border-gray-200"}):t._e()],t.items.length?s("div",{staticClass:"py-1 flex items-center w-full hover:text-red-500 cursor-pointer",on:{"!click":function(e){return e.stopPropagation(),t.deleteItem.apply(null,arguments)}}},[s("div",{staticClass:"text-center w-8"},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1),s("div",[t._v("Delete")])]):t._e()],2)],2)},d=[],f=s("e67d"),m=s.n(f),p=s("604e"),h=s("9c57"),v={name:"DMSElementMenu",props:{item:{type:Object,required:!0},folder:{type:Boolean,default:!1},items:{type:Array,default:()=>[]}},data:()=>({show:!1,top:!0,buttons:[{icon:"info",name:"Information",route:"info"},{icon:"code-branch",name:"Versions",route:"version"},{icon:"tag",name:"Metadata",route:"metadata"}]}),methods:{deleteItem:async function(){try{const{id:t}=this.item;this.folder?await Object(h["c"])(t):await Object(p["f"])(t);const e=this.items.findIndex(t=>t===this.item);if(this.show=!1,e<0)return;this.items.splice(e,1),this.$emit("delete")}catch(t){this.$alert(t)}},goTo:function(t){this.show=!1,this.folder||this.$route.name!==t&&this.$router.replace({name:t,params:{...this.$route.params,file:this.item.id}})},toggleMenu:function(){if(this.show)return this.show=!1;const t=window.innerHeight-this.$refs.container.offsetTop;this.top=t>300,this.show=!0},closeMenu:function(){this.show=!1}},directives:{ClickOutside:m.a}},x=v,g=s("2877"),b=Object(g["a"])(x,u,d,!1,null,null,null),w=b.exports,y={components:{DMSElementMenu:w},name:"DMSFileExplorerItem",props:{item:{type:Object,required:!0},folder:{type:Boolean,default:!1},items:{type:Array,default:()=>[]}},data:()=>({hovering:!1}),computed:{icon:function(){return this.hovering?this.folder?"folder-open":"file-alt":this.folder?"folder":"file"}},methods:{setFavorite:function(){this.item.favorite=!this.item.favorite,this.$emit("favorite",this.item)},selectItem:function(){if(this.folder)return this.$emit("selectFolder",this.item.id);this.$emit("selectFile",this.item.id)},onDelete:function(){this.item.favorite=!1,this.$emit("favorite",this.item)}},filters:{date:c["a"],size:c["e"]}},_=y,C=Object(g["a"])(_,l,r,!1,null,null,null),S=C.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-gray-200 border-l-2 border-gray-300 transition-all duration-300 ease-in-out h-full overflow-hidden absolute md:static",class:[t.file?"w-full md:w-1/3 inset-0 left-0":"w-0 left-full"]},[t.file?s("div",{staticClass:"h-full flex flex-col"},[s("div",{staticClass:"flex-shrink-0",class:{"animate-pulse":t.loading}},[s("div",{staticClass:"p-4"},[s("div",{staticClass:"flex items-center"},[s("div",{staticClass:"text-2xl font-medium",class:{"bg-gray-700 rounded":t.loading}},[t._v(" "+t._s(t.fileData.name||"loading")+" ")]),s("DMSElementMenu",{staticClass:"ml-auto",attrs:{item:t.fileData},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.on;return[s("div",t._g({staticClass:"text-2xl px-2 py-1 cursor-pointer"},a),[s("font-awesome-icon",{attrs:{icon:"ellipsis-v"}})],1)]}}],null,!1,4098986453)}),s("button",{staticClass:"ml-4 text-2xl",on:{click:t.close}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)],1),s("div",{staticClass:"text-center text-7xl my-4"},[s("font-awesome-icon",{attrs:{icon:"file"}})],1),s("div",{staticClass:"flex items-center"},[s("div",{staticClass:"ml-auto text-sm font-medium",class:{"bg-gray-700 rounded":t.loading}},[t._v(" Version: "+t._s(t.fileData.version)+" ")])])])]),t.loading?t._e():s("div",{staticClass:"flex-shrink-0 flex"},t._l(t.tabs,(function(e){return s("DMSTooltip",{key:e.id,staticClass:"flex-grow text-center cursor-pointer transition-all duration-300 ease-in-out py-1 rounded-tr rounded-tl",class:[e.id===t.$route.name?"bg-white":"hover:bg-gray-100"],on:{click:function(s){return t.selectTab(e.id)}},scopedSlots:t._u([{key:"activator",fn:function(){return[s("font-awesome-icon",{attrs:{icon:e.icon}})]},proxy:!0}],null,!0)},[s("span",[t._v(t._s(e.name))])])})),1),s("div",{staticClass:"flex-grow bg-white"},[s("keep-alive",[s("router-view",{on:{version:t.onVersion}})],1)],1)]):t._e()])},D=[],M=s("bfef"),F={name:"DMSFileExplorerDetails",components:{DMSTooltip:M["a"],DMSElementMenu:w},props:{file:{type:String,required:!0},files:{type:Array,default:()=>[]}},data:()=>({loading:!0,allTabs:{info:{icon:"info",name:"Information"},version:{icon:"code-branch",name:"Versions"},metadata:{icon:"tag",name:"Metadata"}},fileData:{id:"",name:"",version:0,tabs:[]}}),computed:{selectedTab:function(){return this.allTabs[this.$route.name]},tabs:function(){return this.fileData.tabs.filter(t=>this.allTabs[t]).map(t=>({...this.allTabs[t],id:t}))}},watch:{file:{immediate:!0,handler:function(){this.getFileData()}},files:{deep:!0,handler:function(){this.close()}}},methods:{getFileData:async function(){if(this.file){this.loading=!0;try{this.fileData=await Object(p["h"])(this.file)}catch(t){this.$alert(t),this.close()}this.loading=!1}},selectTab:function(t){t!==this.$route.name&&this.$router.replace({name:t,params:this.$route.params})},close:function(){this.$router.replace({name:"explorer",params:{...this.$route.params,file:""}}).catch(()=>{})},onVersion:function(t){this.fileData.version=t}}},$=F,T=Object(g["a"])($,k,D,!1,null,"5110c7d8",null),E=T.exports,O=s("eeaf"),I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("DMSTooltip",{staticClass:"px-2 py-1 text-2xl cursor-pointer",attrs:{position:"bottom"},on:{click:t.toggle},scopedSlots:t._u([{key:"activator",fn:function(){return[s("font-awesome-icon",{attrs:{icon:"filter"}})]},proxy:!0}])},[s("span",[t._v("Advance search")])]),s("div",{staticClass:"fixed inset-0 bg-black z-50 bg-opacity-50 transition-all duration-300 ease-in-out",class:[t.show?"opacity-1":"opacity-0 pointer-events-none"]},[s("div",{staticClass:"h-full w-full flex items-center justify-center",on:{click:function(e){return e.target!==e.currentTarget?null:t.toggle.apply(null,arguments)}}},[s("div",{staticClass:"bg-white rounded shadow p-2 relative transition-all duration-300 ease-in-out",class:[t.show?"bottom-0":"bottom-20"],staticStyle:{width:"500px","max-width":"95%"}},[s("div",{staticClass:"text-2xl font-bold border-b-2 border-gray-700 px-2 mb-2 flex items-center"},[s("span",[t._v("ADVANCED SEARCH")]),s("button",{staticClass:"ml-auto p-1",on:{click:t.toggle}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)]),s("div",{staticClass:"px-2"},[s("div",{staticClass:"px-1"},[s("div",{staticClass:"mb-2 text-xl px-1 font-medium text-xl"},[t._v(" Search by Metadata ")]),t._l(t.searchMetadata,(function(e,a){return s("div",{key:a,staticClass:"flex my-1 px-1 gap-2"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"search.name"}],staticClass:"flex-grow border border-gray-300 rounded px-2 outline-none focus:outline-none focus:border-gray-500 transition-all duration-300 ease-in-out",on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"name",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:""}},[t._v("Select Metadata")]),t._l(t.metadata,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2),s("DMSInput",{staticClass:"flex-grow",attrs:{placeholder:"Value",disabled:!e.name},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"search.value"}}),s("button",{staticClass:"ml-2 py-1 px-2 cursor-pointer hover:text-red-500",on:{click:function(e){return t.deleteItem(t.searchMetadata,a)}}},[s("font-awesome-icon",{attrs:{icon:"trash"}})],1)],1)})),s("button",{staticClass:"text-sm flex items-center ml-auto mt-2 cursor-pointer hover:text-blue-500",attrs:{disabled:t.loading},on:{click:t.addMetadata}},[t.loading?[s("span",[s("font-awesome-icon",{staticClass:"animate-spin",attrs:{icon:"spinner"}})],1),s("span",{staticClass:"ml-1 font-medium"},[t._v("Loading")])]:[s("span",[s("font-awesome-icon",{attrs:{icon:"plus"}})],1),s("span",{staticClass:"ml-1 font-medium"},[t._v("ADD")])]],2)],2),s("div",{staticClass:"px-1"},[s("div",{staticClass:"mb-2 text-xl px-1 font-medium text-xl"},[t._v(" Search by content ")]),s("div",{staticClass:"px-1"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"border border-gray-300 rounded px-2 py-0.5 outline-none w-full focus:outline-none focus:border-gray-500 transition-all duration-300 ease-in-out",attrs:{rows:"4",placeholder:"Text to search for ..."},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])]),s("div",{staticClass:"text-right mt-4"},[s("DMSButton",{on:{click:t.search}},[t._v("Search")])],1)])])])])],1)},j=[],N=s("572b"),B=s("c670");const A={Supplier:{name:"Supplier",metadata:["Client","Address","Phone Number","Expedition","Total"]},Image:{name:"Image",metadata:[]},Copyright:{name:"Copyright",metadata:["Copyright by","Github","LinkedIn"]}},L=Object(c["b"])(()=>Object.values(A)),z=Object(c["b"])(()=>{const t=new Set;return Object.values(A).forEach(({metadata:e})=>{e.forEach(e=>{t.add(e)})}),Array.from(t.values()).sort((t,e)=>t>e?1:-1)});var P={name:"DMSAdvanceSearch",components:{DMSTooltip:M["a"],DMSInput:N["a"],DMSButton:B["a"]},data:()=>({show:!1,searchMetadata:[],content:"",metadata:[],loading:!1}),watch:{show:function(t){if(!t)return this.searchMetadata=[],void(this.content="");this.getMetadata()}},methods:{toggle:function(){this.show=!this.show},deleteItem:function(t,e){t.splice(e,1)},addMetadata:function(){this.searchMetadata.push({name:"",value:""})},search:function(){const t=new URLSearchParams;this.searchMetadata.forEach(e=>{t.append(e.name,e.value)}),t.append("content",this.content),this.$router.replace({name:this.$route.name,params:{folder:"@Search"},query:Object.fromEntries(t)}),this.toggle()},getMetadata:async function(){this.loading=!0;try{this.metadata=await z()}catch(t){this.$alert(t)}this.loading=!1}}},U=P,q=Object(g["a"])(U,I,j,!1,null,null,null),V=q.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("DMSTooltip",{staticClass:"px-2 py-1 text-2xl cursor-pointer",attrs:{position:"bottom"},on:{click:t.toggle},scopedSlots:t._u([{key:"activator",fn:function(){return[s("font-awesome-icon",{attrs:{icon:"file-upload"}})]},proxy:!0}])},[s("span",[t._v("Upload File")])]),s("div",{staticClass:"fixed inset-0 bg-black z-50 bg-opacity-50 transition-all duration-300 ease-in-out md:p-4",class:[t.show?"opacity-1":"opacity-0 pointer-events-none"]},[s("div",{staticClass:"h-full w-full bg-white md:rounded shadow flex flex-col overflow-hidden"},[s("div",{staticClass:"flex-shrink-0 bg-gray-200 px-4 py-2 flex items-center"},[s("div",{staticClass:"text-3xl font-bold"},[t._v("File Upload")]),s("button",{staticClass:"ml-auto text-2xl flex items-center",on:{click:t.toggle}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)]),s("div",{staticClass:"md:hidden bg-gray-200 border-t border-b border-gray-300 px-2 py-1 flex justify-between items-center`"},[s("button",{on:{click:function(e){return t.changeShowFiles()}}},[t._v("Files")]),s("button",{on:{click:function(e){return t.changeShowFiles(!1)}}},[t._v("Config")])]),s("div",{staticClass:"flex-grow border-t-2 border-b-2 border-gray-300 flex"},[s("DMSFileLoader",{staticClass:"w-full md:w-2/5",class:{"hidden md:block":!t.showFiles},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}}),s("DMSFileUploadConfig",{staticClass:"w-full md:w-3/5",class:{"hidden md:block":t.showFiles},attrs:{files:t.files}})],1),s("div",{staticClass:"flex-shrink-0 bg-gray-200 px-4 py-2 flex items-center"},[s("div",[t._v("Files to upload: "+t._s(t.files.length))]),s("div",{staticClass:"ml-auto"},[s("DMSButton",{staticClass:"mr-2",attrs:{color:"red",disabled:!t.files.length||t.uploading},on:{click:t.clearFiles}},[s("span",[t._v("Clear")])]),s("DMSButton",{attrs:{disabled:!t.files.length||t.uploading},on:{click:t.upload}},[s("span",[t._v("Upload")])])],1)])])])],1)},R=[],G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-gray-50 border-r-2 border-gray-300"},[s("input",{ref:"input",staticClass:"hidden",attrs:{type:"file",multiple:""},on:{input:t.getFiles}}),s("div",{staticClass:"h-full w-full flex flex-col items-center justify-center cursor-pointer",on:{click:t.selectFiles}},[t.value.length?s("div",{staticClass:"h-full w-full p-4"},t._l(t.value,(function(e,a){return s("div",{key:a,staticClass:"flex my-2"},[s("div",{staticClass:"text-6xl text-blue-500 mr-4"},[s("font-awesome-icon",{attrs:{icon:"file"}})],1),s("div",{staticClass:"w-full flex flex-col pb-0.5"},[s("div",{staticClass:"text-lg font-medium leading-none"},[t._v(t._s(e.name))]),s("div",{staticClass:"text-xs"},[t._v("Size: "+t._s(t._f("size")(e.size)))]),s("div",{staticClass:"bg-gray-300 rounded relative overflow-hidden mt-auto"},[s("div",{staticClass:"absolute left-0 top-0 bottom-0 bg-blue-300",style:{width:e.progress+"%"}}),s("div",{staticClass:"text-center text-xs relative"},[t._v(t._s(e.progress)+"%")])])])])})),0):[s("div",{staticClass:"text-8xl text-blue-300"},[s("font-awesome-icon",{attrs:{icon:"file-upload"}})],1),s("div",{staticClass:"mt-4 text-4xl font-medium text-gray-500"},[t._v(" Select files ")])]],2)])},J=[],X={name:"DMSFileLoader",props:{value:{type:Array,default:()=>[]}},methods:{selectFiles:function(){this.$refs.input.click()},getFiles:function(){0!==this.$refs.input.files.length&&(this.$emit("input",[...this.value,...Array.from(this.$refs.input.files).map(t=>(t.progress=0,t.template="",t.metadata=[],t))]),this.$refs.input.value="")}},filters:{size:c["e"]}},Y=X,W=Object(g["a"])(Y,G,J,!1,null,null,null),K=W.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-full flex flex-col"},[s("div",{staticClass:"flex items-center shadow bg-gray-100 flex-shrink-0"},[s("div",{staticClass:"text-2xl w-14 h-14 flex-shrink-0"},[s("button",{directives:[{name:"show",rawName:"v-show",value:0!==t.tabIndex,expression:"tabIndex !== 0"}],staticClass:"w-full h-full",on:{click:function(e){t.tabIndex--}}},[s("font-awesome-icon",{attrs:{icon:"chevron-left"}})],1)]),s("div",{staticClass:"flex-grow text-center text-2xl font-medium uppercase"},[t._v(" "+t._s(t.selectedTab)+" ")]),s("div",{staticClass:"text-2xl w-14 h-14 flex-shrink-0"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.tabIndex!==t.tabs.length-1,expression:"tabIndex !== tabs.length - 1"}],staticClass:"w-full h-full",on:{click:function(e){t.tabIndex++}}},[s("font-awesome-icon",{attrs:{icon:"chevron-right"}})],1)])]),s("div",{staticClass:"flex-grow"},["template"===t.selectedTab?s("div",{staticClass:"p-4"},t._l(t.files,(function(e,a){return s("div",{key:a,staticClass:"flex items-center my-1 bg-gray-200 border-2 rounded border-gray-300 px-2 py-1"},[s("DMSTooltip",{staticClass:"flex-shrink-0 w-2/3 overflow-ellipsis overflow-hidden pr-2",scopedSlots:t._u([{key:"activator",fn:function(){return[s("span",[t._v(t._s(e.name))])]},proxy:!0}],null,!0)},[s("span",[t._v(t._s(e.name))])]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.template,expression:"file.template"}],staticClass:"flex-grow border border-gray-300 rounded px-2 py-0.5 outline-none focus:outline-none focus:border-gray-500 transition-all duration-300 ease-in-out",on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"template",s.target.multiple?a:a[0])},function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"lazy",void 0,s.key,void 0)?null:t.onTemplateChange(e)}]}},[t.loadingTemplates?s("option",{attrs:{value:""}},[t._v("Downloading templates...")]):t._l(t.templates,(function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1)})),0):"metadata"===t.selectedTab?t._l(t.files,(function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentFile===a,expression:"currentFile === index"}],key:a,staticClass:"flex flex-col h-full w-full"},[s("div",{staticClass:"flex items-center shadow bg-gray-100 flex-shrink-0 border-t border-gray-200"},[s("div",{staticClass:"text-sm w-10 h-10 flex-shrink-0"},[s("button",{directives:[{name:"show",rawName:"v-show",value:0!==t.currentFile,expression:"currentFile !== 0"}],staticClass:"w-full h-full",on:{click:function(e){t.currentFile--}}},[s("font-awesome-icon",{attrs:{icon:"chevron-left"}})],1)]),s("div",{staticClass:"flex-grow text-center text-xs font-medium"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"text-sm w-10 h-10 flex-shrink-0"},[s("button",{directives:[{name:"show",rawName:"v-show",value:t.currentFile!==t.files.length-1,expression:"currentFile !== files.length - 1"}],staticClass:"w-full h-full",on:{click:function(e){t.currentFile++}}},[s("font-awesome-icon",{attrs:{icon:"chevron-right"}})],1)])]),s("div",{staticClass:"flex-grow p-4"},[s("div",{staticClass:"px-2 mb-4 flex items-center"},[s("div",{staticClass:"text-sm py-2"},[s("span",[t._v("Template: ")]),s("span",{staticClass:"font-medium"},[t._v(t._s(e.template))])]),s("DMSButton",{directives:[{name:"show",rawName:"v-show",value:e.metadata.length,expression:"file.metadata.length"}],staticClass:"ml-auto text-xs",on:{click:function(s){return t.scan(e)}}},[s("span",[t._v("SCAN")])])],1),e.metadata.length?t._l(e.metadata,(function(e){return s("div",{key:e.name,staticClass:"flex items-center bg-gray-200 border-2 border-gray-300 rounded px-2 py-1 my-1"},[s("div",{staticClass:"w-1/4 font-medium"},[t._v(t._s(e.name))]),s("div",{staticClass:"w-3/4"},[s("DMSInput",{staticClass:"w-full",model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"md.value"}})],1)])})):s("div",[s("p",{staticClass:"text-xl text-gray-500 text-center py-4"},[t._v("This template has no metadata")])])],2)])})):t._e()],2)])},Z=[],tt={components:{DMSTooltip:M["a"],DMSInput:N["a"],DMSButton:B["a"]},name:"DMSFileUploadConfig",props:{files:{type:Array,default:()=>[]}},data:()=>({tabs:["template","metadata"],tabIndex:0,loadingTemplates:!1,templates:[],currentFile:0}),computed:{selectedTab:function(){return this.tabs[this.tabIndex]}},mounted:function(){this.getTemplates()},methods:{getTemplates:async function(){this.loadingTemplates=!0;try{const t=(await L()).map(t=>({...t,value:t.name}));this.templates=[{name:"Choose a template",value:"",metadata:[]},...t]}catch(t){this.$alert(t)}this.loadingTemplates=!1},onTemplateChange:function(t){const e=this.templates.find(({value:e})=>e===t.template);t.metadata=e.metadata.map(t=>({name:t,value:""}))},scan:function(t){t.metadata=t.metadata.map(({name:t})=>({name:t,value:t+" value"})),this.files.splice(this.files.findIndex(e=>e===t),1,t)}}},et=tt,st=Object(g["a"])(et,Q,Z,!1,null,null,null),at=st.exports,it={name:"DMSFileUpload",components:{DMSTooltip:M["a"],DMSButton:B["a"],DMSFileLoader:K,DMSFileUploadConfig:at},props:{folder:{type:String,required:!0}},data:()=>({show:!1,files:[],showFiles:!0,uploading:!1}),methods:{toggle:function(){this.uploading||(this.clearFiles(),this.show=!this.show)},clearFiles:function(){this.files=[]},upload:async function(){this.uploading=!0,this.changeShowFiles();try{const t=this.files.map(t=>new Promise(async e=>{const s=Object(c["c"])(1e3,5e3),a=100,i=()=>{if(t.progress+=100*a/s,t.progress=Math.round(100*t.progress)/100,t.progress>100&&(t.progress=100),this.files=[...this.files],t.progress<100)return setTimeout(()=>i(),a)};setTimeout(()=>i(),a),await Object(c["b"])(p["a"],s,s)(t,this.folder,t.metadata),e()}));await Promise.all(t),await Object(c["b"])(()=>{},1e3,1e3)(),this.clearFiles(),this.uploading=!1,this.$emit("finished"),this.toggle()}catch(t){this.$alert(t),this.uploading=!1}},changeShowFiles:function(t=!0){this.showFiles=t}}},ot=it,nt=Object(g["a"])(ot,H,R,!1,null,null,null),lt=nt.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("DMSTooltip",{staticClass:"px-2 py-1 text-2xl cursor-pointer",attrs:{position:"bottom"},on:{click:t.toggle},scopedSlots:t._u([{key:"activator",fn:function(){return[s("font-awesome-icon",{attrs:{icon:"folder-plus"}})]},proxy:!0}])},[s("span",[t._v("New Folder")])]),s("div",{staticClass:"fixed inset-0 bg-black z-50 bg-opacity-50 transition-all duration-300 ease-in-out",class:[t.show?"opacity-1":"opacity-0 pointer-events-none"]},[s("div",{staticClass:"h-full w-full flex items-center justify-center",on:{click:function(e){return e.target!==e.currentTarget?null:t.toggle.apply(null,arguments)}}},[s("div",{staticClass:"bg-white rounded shadow p-2 relative transition-all duration-300 ease-in-out",class:[t.show?"bottom-0":"bottom-20"],staticStyle:{width:"500px","max-width":"95%"}},[s("div",{staticClass:"text-2xl font-bold border-b-2 border-gray-700 px-2 mb-2 flex items-center"},[s("span",[t._v("NEW FOLDER")]),s("button",{staticClass:"ml-auto p-1",on:{click:t.toggle}},[s("font-awesome-icon",{attrs:{icon:"times"}})],1)]),s("div",{staticClass:"px-2"},[s("div",{staticClass:"px-1"},[s("DMSInput",{staticClass:"w-full",attrs:{placeholder:"Folder name",disabled:t.loading,autofocus:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.newFolder.apply(null,arguments)}},model:{value:t.folderName,callback:function(e){t.folderName=e},expression:"folderName"}})],1),s("div",{staticClass:"text-right mt-4"},[s("DMSButton",{attrs:{loading:t.loading,disabled:!t.folderName||t.loading},on:{click:t.newFolder}},[t._v("New folder")])],1)])])])])],1)},ct=[],ut={name:"DMSNewFolder",components:{DMSTooltip:M["a"],DMSInput:N["a"],DMSButton:B["a"]},props:{parent:{type:String,required:!0}},data:()=>({show:!1,folderName:"",loading:!1}),watch:{show:function(t){t||(this.folderName="")}},methods:{toggle:function(){this.show=!this.show},newFolder:async function(){this.loading=!0;try{this.metadata=await Object(h["b"])(this.folderName,this.parent),this.$emit("newFolder"),this.toggle()}catch(t){this.$alert(t)}this.loading=!1}}},dt=ut,ft=Object(g["a"])(dt,rt,ct,!1,null,null,null),mt=ft.exports,pt={name:"DMSFileExplorer",components:{DMSFileExplorerItem:S,DMSFileExplorerDetails:E,DMSItemsSkeleton:O["a"],DMSAdvanceSearch:V,DMSFileUpload:lt,DMSNewFolder:mt},props:{folder:{type:String,required:!0},file:{type:String,required:!0}},data:()=>({loading:!1,folderData:{files:[],folders:[],folder:"Loading"},selectedFile:{}}),computed:{folderId:function(){return this.folder},numberOfItems:function(){return this.folderData.files.length+this.folderData.folders.length},isSearch:function(){return"@Search"===this.folder}},watch:{folder:{immediate:!0,handler:function(){this.getFolderData()}}},methods:{getFolderData:async function(){this.loading=!0;try{this.folderData=await Object(h["d"])(this.folderId,this.$route.query)}catch(t){this.$alert(t),this.goTo()}this.loading=!1},selectFile:function(t){const e=t===this.$route.params.file;this.$router.replace({name:e?"explorer":"info",params:{...this.$route.params,file:e?"":t}})},selectFolder:function(t){this.$router.replace({name:"explorer",params:{...this.$route.props,folder:t}})},goTo:function(t="@home"){this.$router.replace({name:"explorer",params:{...this.$route.params,folder:t,file:""}})},onFavorite:function(t,e){this.$emit("favorite",{...t,type:e})}}},ht=pt,vt=Object(g["a"])(ht,o,n,!1,null,null,null),xt=vt.exports,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-full p-1 shadow-xl bg-white absolute md:static transition-all duration-300 ease-in-out",class:[t.showBar?"left-0":"-left-14"]},[s("div",{staticClass:"h-full flex flex-col items-center",class:{"animate-pulse":t.loading}},[s("DMSTooltip",{staticClass:"text-2xl h-12 w-12 flex items-center justify-center text-white bg-blue-500 rounded shadow",attrs:{position:"right"},scopedSlots:t._u([{key:"activator",fn:function(){return[s("font-awesome-icon",{attrs:{icon:"file-invoice"}})]},proxy:!0}])},[s("span",[t._v("LOGO")])]),s("div",{staticClass:"flex-grow flex justify-center flex-col"},t._l(t.sideIcons,(function(e){return s("DMSTooltip",{key:e.id,staticClass:"w-12 h-12 my-1 flex items-center justify-center text-white text-2xl rounded-lg cursor-pointer transition-all duration-300 ease-in-out",class:[t.isSelected(e)?"bg-blue-700":"bg-blue-400 hover:bg-blue-500"],attrs:{position:"right"},on:{click:function(s){return t.goTo(e)}},scopedSlots:t._u([{key:"activator",fn:function(){return[s("font-awesome-icon",{attrs:{icon:e.icon}})]},proxy:!0}],null,!0)},[s("span",[t._v(t._s(e.name))])])})),1),s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeMenu,expression:"closeMenu"}]},[s("DMSTooltip",{staticClass:"rounded-full bg-gray-200 h-12 w-12 flex items-center justify-center text-xl font-medium cursor-pointer",attrs:{position:"right"},on:{click:t.toggleMenu},scopedSlots:t._u([{key:"activator",fn:function(){return[t._v(t._s(t.userData.initials))]},proxy:!0}])},[s("span",[t._v(t._s(t.userData.name))])]),s("DMSLeftBarMenu",{attrs:{show:t.showMenu}})],1)],1),s("div",{staticClass:"md:hidden absolute left-full top-1/2 bg-white px-1.5 py-1 leading-none rounded-tr rounded-br",on:{click:t.toggleBar}},[s("font-awesome-icon",{attrs:{icon:t.showBar?"chevron-left":"chevron-right"}})],1)])},bt=[],wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"relative w-full"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"w-44 bg-white bottom-0 absolute rounded border-2 border-gray-200 shadow",staticStyle:{left:"120%"}},[t._l(t.buttons,(function(e){return s("DMSTooltip",{key:e.name,staticClass:"flex items-center w-full px-2 py-1 cursor-not-allowed hover:bg-gray-100",attrs:{position:"right"},scopedSlots:t._u([{key:"activator",fn:function(){return[s("span",{staticClass:"flex-shrink-0 mr-2 w-5 text-center"},[s("font-awesome-icon",{attrs:{icon:e.icon}})],1),s("span",{staticClass:"flex-shrink-0"},[t._v(t._s(e.name))])]},proxy:!0}],null,!0)},[s("span",[t._v("Not implemented")])])})),s("div",{staticClass:"border border-gray-200"}),s("div",{staticClass:"flex items-center w-full px-2 py-2 cursor-pointer hover:bg-red-500 hover:text-white",on:{click:t.logout}},[s("span",{staticClass:"flex-shrink-0 mr-2 w-5 text-center"},[s("font-awesome-icon",{attrs:{icon:"sign-out-alt"}})],1),s("span",{staticClass:"flex-shrink-0"},[t._v("Logout")])])],2)])},yt=[],_t={name:"DMSLeftBarMenu",props:{show:{type:Boolean,default:!1}},data:()=>({buttons:[{icon:"cog",name:"Control Panel"},{icon:"user",name:"Entities"},{icon:"eye",name:"OCR"}]}),methods:{logout:function(){this.$router.replace("/")}},components:{DMSTooltip:M["a"]}},Ct=_t,St=Object(g["a"])(Ct,wt,yt,!1,null,null,null),kt=St.exports,Dt=s("2612"),Mt={components:{DMSTooltip:M["a"],DMSLeftBarMenu:kt},name:"DMSLeftBar",data:()=>({userData:{},loading:!0,showMenu:!1,showBar:!1}),mounted:function(){this.getUserData()},computed:{sideIcons:function(){const t=this.userData.favorites||[];return[{id:"@Home",folder:!0,icon:"home",name:"Home",route:{name:"explorer",params:{folder:"@Home",file:""}}},...t.map(t=>{const e="folder"===t.type;return{id:t.id,folder:e,icon:e?"folder":"file",name:t.name,route:{name:e?"explorer":"info",params:{folder:e?t.id:this.$route.params.folder,file:e?"":t.id}}}})]},currentFolder:function(){return this.$route.params.folder},currentFile:function(){return this.$route.params.file}},methods:{getUserData:async function(){this.userData=await Object(Dt["a"])("admin"),this.loading=!1},isSelected:function(t){return!(!t.folder||this.currentFolder!==t.id)||!t.folder&&this.currentFile===t.id},goTo:function(t){this.isSelected(t)||this.$router.replace({name:t.route.name,params:{...this.$route.params,...t.route.params}})},toggleMenu:function(){this.showMenu=!this.showMenu},closeMenu:function(){this.showMenu=!1},toggleBar:function(){this.showBar=!this.showBar},addFavorite:function(t){const{favorites:e}=this.userData;if(t.favorite)e.push(t);else{const s=e.findIndex(({id:e})=>e===t.id);if(s<0)return;e.splice(s,1)}}},directives:{ClickOutside:m.a}},Ft=Mt,$t=Object(g["a"])(Ft,gt,bt,!1,null,null,null),Tt=$t.exports,Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fixed top-0 left-0 right-0 pointer-events-none flex justify-center"},[s("p",{staticClass:"absolute bg-black bg-opacity-70 text-white px-2 py-1 rounded transition-all duration-300 ease-in-out",class:[t.show?"top-2":"-top-10"]},[t._v(t._s(t.message))])])},Ot=[],It={name:"DMSAlert",data:()=>({show:!1,message:""}),mounted:function(){this.$setAlert(this)},methods:{alert:function(t){this.message="string"===typeof t?t:"message"in t?t.message:"",this.show=!0,setTimeout(()=>{this.show=!1,setTimeout(()=>{this.message=""},300)},3e3)}}},jt=It,Nt=Object(g["a"])(jt,Et,Ot,!1,null,null,null),Bt=Nt.exports,At={components:{DMSLeftBar:Tt,DMSFileExplorer:xt,DMSAlert:Bt},props:{folder:{type:String,default:""},file:{type:String,default:""}},methods:{onFavorite:function(t){this.$refs.leftBar.addFavorite(t)}}},Lt=At,zt=Object(g["a"])(Lt,a,i,!1,null,null,null);e["default"]=zt.exports},bfef:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._g({staticClass:"relative",on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave}},t.$listeners),[s("div",{staticClass:"absolute bg-black bg-opacity-60 rounded text-white px-2 py-1 whitespace-nowrap text-sm z-40 pointer-events-none transition-all ease-in-out duration-200",class:[t.show?"opacity-1":"opacity-0"],style:t.styles},[t._t("default",(function(){return[t._v("Tooltip")]}))],2),t._t("activator")],2)},i=[],o={name:"DMSTooltip",props:{position:{type:String,default:"top"}},data:()=>({show:!1}),computed:{styles:function(){const t={top:{top:"calc(-100% - 5px)",left:"50%",transform:"translateX(-50%)"},right:{top:"50%",left:"calc(100% + 5px)",transform:"translateY(-50%)"},bottom:{top:"calc(100% + 5px)",left:"50%",transform:"translateX(-50%)"},left:{top:"50%",right:"calc(100% + 5px)",transform:"translateY(-50%)"}};return t[this.position]}},methods:{onMouseEnter:function(){this.show=!0},onMouseLeave:function(){this.show=!1}}},n=o,l=s("2877"),r=Object(l["a"])(n,a,i,!1,null,"29cea0f1",null);e["a"]=r.exports},e67d:function(t,e){function s(t){return"function"===typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function a(t,e){if(!t||!e)return!1;for(var s=0,a=e.length;s<a;s++)try{if(t.contains(e[s]))return!0;if(e[s].contains(t))return!1}catch(i){return!1}return!1}function i(t){return"undefined"!==typeof t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,e,o){if(!s(e))return;function n(e){if(o.context){var s=e.path||e.composedPath&&e.composedPath();s&&s.length>0&&s.unshift(e.target),t.contains(e.target)||a(o.context.popupItem,s)||t.__vueClickOutside__.callback(e)}}t.__vueClickOutside__={handler:n,callback:e.value};const l="ontouchstart"in document.documentElement?"touchstart":"click";!i(o)&&document.addEventListener(l,n)},update:function(t,e){s(e)&&(t.__vueClickOutside__.callback=e.value)},unbind:function(t,e,s){const a="ontouchstart"in document.documentElement?"touchstart":"click";!i(s)&&t.__vueClickOutside__&&document.removeEventListener(a,t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},eeaf:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(Array(t.number),(function(t,e){return s("div",{key:e,staticClass:"flex my-1 bg-gray-300 border-2 border-gray-300 rounded overflow-hidden h-14 animate-pulse z-10"})})),0)},i=[],o={name:"DMSItemsSkeleton",props:{number:{type:Number,default:4}}},n=o,l=s("2877"),r=Object(l["a"])(n,a,i,!1,null,"68b91cf2",null);e["a"]=r.exports}}]);
//# sourceMappingURL=explorer.2c82d7aa.js.map