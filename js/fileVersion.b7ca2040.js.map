{"version":3,"sources":["webpack:///./src/components/DMSFileVersion.vue?1c90","webpack:///src/components/DMSFileVersion.vue","webpack:///./src/components/DMSFileVersion.vue?03db","webpack:///./src/components/DMSFileVersion.vue","webpack:///./src/components/DMSTooltip.vue?7bf8","webpack:///src/components/DMSTooltip.vue","webpack:///./src/components/DMSTooltip.vue?fdf8","webpack:///./src/components/DMSTooltip.vue","webpack:///./src/components/DMSFileMetadata.vue?e19a","webpack:///src/components/DMSFileMetadata.vue","webpack:///./src/components/DMSFileMetadata.vue?5739","webpack:///./src/components/DMSFileMetadata.vue","webpack:///./src/components/DMSItemsSkeleton.vue?72ba","webpack:///src/components/DMSItemsSkeleton.vue","webpack:///./src/components/DMSItemsSkeleton.vue?b638","webpack:///./src/components/DMSItemsSkeleton.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","loading","ref","attrs","on","onNewVersion","$event","$refs","input","click","_v","_l","fileData","version","key","downloadVersion","scopedSlots","_u","fn","class","colors","status","proxy","_s","modifiedBy","_f","date","staticRenderFns","components","DMSTooltip","DMSItemsSkeleton","name","props","file","type","String","required","data","deleted","active","expiring","watch","immediate","handler","getFileData","methods","async","files","$emit","err","$alert","download","href","URL","createObjectURL","filters","component","_g","onMouseEnter","onMouseLeave","$listeners","show","style","_t","md","value","indexOf","_k","keyCode","saveMetadata","clearMetadata","model","callback","$$v","$set","expression","originalValue","saving","button","icon","tooltip","DMSInput","computed","metadata","map","m","buttons","getMetadata","_metadata","index","findIndex","splice","Array","number","x","y"],"mappings":"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","file":"js/fileVersion.b7ca2040.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-full p-4\"},[(!_vm.loading)?[_c('a',{ref:\"download\",staticClass:\"hidden\",attrs:{\"download\":\"\"}}),_c('div',{staticClass:\"text-right mb-3\"},[_c('input',{ref:\"input\",staticClass:\"hidden\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onNewVersion}}),_c('button',{staticClass:\"text-gray-400 font-semibold\",on:{\"click\":function($event){return _vm.$refs.input.click()}}},[_c('font-awesome-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"plus\"}}),_c('span',[_vm._v(\"New version\")])],1)]),_vm._l((_vm.fileData.versions),function(version){return _c('button',{key:version.version,staticClass:\"flex my-1 bg-gray-200 hover:bg-gray-300 border-2 border-gray-300 rounded overflow-hidden w-full\",on:{\"click\":function($event){return _vm.downloadVersion(version.version)}}},[_c('DMSTooltip',{staticClass:\"w-1.5 self-stretch\",attrs:{\"position\":\"right\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('div',{staticClass:\"w-full h-full\",class:[_vm.colors[version.status]]})]},proxy:true}],null,true)},[_c('span',[_vm._v(_vm._s(version.status))])]),_c('div',{staticClass:\"flex items-center flex-grow px-2 py-1\"},[_c('div',{staticClass:\"text-left\"},[_c('p',{staticClass:\"font-medium\"},[_vm._v(\"Version: \"+_vm._s(version.version))]),_c('p',{staticClass:\"text-xs text-gray-400\"},[_vm._v(\"Download\")])]),_c('div',{staticClass:\"ml-auto text-right\"},[_c('p',[_vm._v(_vm._s(version.modifiedBy))]),_c('p',{staticClass:\"text-xs font-light\"},[_vm._v(\" \"+_vm._s(_vm._f(\"date\")(version.date))+\" \")])])])],1)})]:_c('DMSItemsSkeleton')],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"h-full p-4\">\r\n\t\t<template v-if=\"!loading\">\r\n      <a ref=\"download\" class=\"hidden\" download></a>\r\n      <div class=\"text-right mb-3\">\r\n        <input ref=\"input\" type=\"file\" class=\"hidden\" @change=\"onNewVersion\">\r\n        <button class=\"text-gray-400 font-semibold\" @click=\"$refs.input.click()\">\r\n          <font-awesome-icon class=\"mr-1\" icon=\"plus\" />\r\n          <span>New version</span>\r\n        </button>\r\n      </div>\r\n      <button\r\n\t\t\t\tv-for=\"version in fileData.versions\"\r\n\t\t\t\t:key=\"version.version\"\r\n\t\t\t\tclass=\"flex my-1 bg-gray-200 hover:bg-gray-300 border-2 border-gray-300 rounded overflow-hidden w-full\"\r\n        @click=\"downloadVersion(version.version)\"\r\n\t\t\t>\r\n\t\t\t\t<DMSTooltip class=\"w-1.5 self-stretch\" position=\"right\">\r\n\t\t\t\t\t<template #activator>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"w-full h-full\"\r\n\t\t\t\t\t\t\t:class=\"[colors[version.status]]\"\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<span>{{ version.status }}</span>\r\n\t\t\t\t</DMSTooltip>\r\n\t\t\t\t<div class=\"flex items-center flex-grow px-2 py-1\">\r\n\t\t\t\t\t<div class=\"text-left\">\r\n\t\t\t\t\t\t<p class=\"font-medium\">Version: {{ version.version }}</p>\r\n            <p class=\"text-xs text-gray-400\">Download</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"ml-auto text-right\">\r\n\t\t\t\t\t\t<p>{{ version.modifiedBy }}</p>\r\n\t\t\t\t\t\t<p class=\"text-xs font-light\">\r\n\t\t\t\t\t\t\t{{ version.date | date }}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n    </template>\r\n\t\t<DMSItemsSkeleton v-else />\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport { dateToLocale } from \"@/utils/utils\";\r\n\timport DMSTooltip from \"./DMSTooltip.vue\";\r\n\timport DMSItemsSkeleton from \"./DMSItemsSkeleton.vue\";\r\n  import { getFileVersions, addVersion, downloadVersion } from \"../api/files\";\r\n\r\n\texport default {\r\n\t\tcomponents: { DMSTooltip, DMSItemsSkeleton },\r\n\t\tname: \"DMSFileVersion\",\r\n\t\tprops: {\r\n\t\t\tfile: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\trequired: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata: () => ({\r\n\t\t\tloading: true,\r\n\t\t\tfileData: {},\r\n\t\t\tcolors: {\r\n\t\t\t\tdeleted: \"bg-red-500\",\r\n\t\t\t\tactive: \"bg-green-400\",\r\n\t\t\t\texpiring: \"bg-yellow-400\",\r\n\t\t\t},\r\n\t\t}),\r\n\t\twatch: {\r\n\t\t\tfile: {\r\n\t\t\t\timmediate: true,\r\n\t\t\t\thandler: function () {\r\n\t\t\t\t\tthis.getFileData();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetFileData: async function () {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tthis.fileData = await getFileVersions(this.file);\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t},\r\n      onNewVersion: async function () {\r\n        const file = this.$refs.input.files[0];\r\n        this.loading = true;\r\n        try {\r\n          this.fileData = await addVersion(this.file, file);\r\n          this.$emit('version', this.fileData.version);\r\n        }\r\n        catch (err) {\r\n          this.$alert(err);\r\n        }\r\n        this.loading = false;\r\n      },\r\n      downloadVersion: async function (version) {\r\n        try {\r\n          const file = await downloadVersion(this.file, version);\r\n          const download = this.$refs.download;\r\n          download.href = URL.createObjectURL(file);\r\n          download.download = file.name;\r\n          download.click();\r\n        }\r\n        catch (err) {\r\n          this.$alert(err);\r\n        }\r\n      }\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tdate: dateToLocale,\r\n\t\t},\r\n\t};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DMSFileVersion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DMSFileVersion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DMSFileVersion.vue?vue&type=template&id=4c33154f&\"\nimport script from \"./DMSFileVersion.vue?vue&type=script&lang=js&\"\nexport * from \"./DMSFileVersion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._g({staticClass:\"relative\",on:{\"mouseenter\":_vm.onMouseEnter,\"mouseleave\":_vm.onMouseLeave}},_vm.$listeners),[_c('div',{staticClass:\"absolute bg-black bg-opacity-60 rounded text-white px-2 py-1 whitespace-nowrap text-sm z-40 pointer-events-none transition-all ease-in-out duration-200\",class:[_vm.show ? 'opacity-1' : 'opacity-0'],style:(_vm.styles)},[_vm._t(\"default\",function(){return [_vm._v(\"Tooltip\")]})],2),_vm._t(\"activator\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div\r\n\t\tclass=\"relative\"\r\n\t\tv-on=\"$listeners\"\r\n\t\t@mouseenter=\"onMouseEnter\"\r\n\t\t@mouseleave=\"onMouseLeave\"\r\n\t>\r\n\t\t<div\r\n\t\t\tclass=\"absolute bg-black bg-opacity-60 rounded text-white px-2 py-1 whitespace-nowrap text-sm z-40 pointer-events-none transition-all ease-in-out duration-200\"\r\n\t\t\t:class=\"[show ? 'opacity-1' : 'opacity-0']\"\r\n\t\t\t:style=\"styles\"\r\n\t\t>\r\n\t\t\t<slot>Tooltip</slot>\r\n\t\t</div>\r\n\t\t<slot name=\"activator\"></slot>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"DMSTooltip\",\r\n\t\tprops: {\r\n\t\t\tposition: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"top\",\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata: () => ({\r\n\t\t\tshow: false,\r\n\t\t}),\r\n\t\tcomputed: {\r\n\t\t\tstyles: function () {\r\n\t\t\t\tconst styles = {\r\n\t\t\t\t\ttop: {\r\n\t\t\t\t\t\ttop: \"calc(-100% - 5px)\",\r\n\t\t\t\t\t\tleft: \"50%\",\r\n\t\t\t\t\t\ttransform: \"translateX(-50%)\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tright: {\r\n\t\t\t\t\t\ttop: \"50%\",\r\n\t\t\t\t\t\tleft: \"calc(100% + 5px)\",\r\n\t\t\t\t\t\ttransform: \"translateY(-50%)\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbottom: {\r\n\t\t\t\t\t\ttop: \"calc(100% + 5px)\",\r\n\t\t\t\t\t\tleft: \"50%\",\r\n\t\t\t\t\t\ttransform: \"translateX(-50%)\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\tleft: {\r\n\t\t\t\t\t\ttop: \"50%\",\r\n\t\t\t\t\t\tright: \"calc(100% + 5px)\",\r\n\t\t\t\t\t\ttransform: \"translateY(-50%)\",\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn styles[this.position];\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonMouseEnter: function () {\r\n\t\t\t\tthis.show = true;\r\n\t\t\t},\r\n\t\t\tonMouseLeave: function () {\r\n\t\t\t\tthis.show = false;\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DMSTooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DMSTooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DMSTooltip.vue?vue&type=template&id=29cea0f1&scoped=true&\"\nimport script from \"./DMSTooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./DMSTooltip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29cea0f1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"h-full p-4\"},[(!_vm.loading)?_vm._l((_vm.metadata),function(md){return _c('div',{key:md.name,staticClass:\"flex items-center px-2 py-1 my-1 bg-gray-200 border-2 border-gray-300 rounded\"},[_c('div',{staticClass:\"text-lg font-medium w-1/3 flex-shrink-0\"},[_vm._v(_vm._s(md.name))]),_c('div',{staticClass:\"flex-grow\"},[(md.link)?_c('a',{staticClass:\"border border-gray-300 rounded px-2 py-0.5 cursor-pointer flex items-center\",attrs:{\"href\":md.value,\"target\":\"_blank\"}},[_c('span',{staticClass:\"mr-auto\"},[_vm._v(\"Link\")]),_c('font-awesome-icon',{attrs:{\"icon\":\"external-link-alt\"}})],1):_c('div',{staticClass:\"flex items-center\"},[_c('DMSInput',{staticClass:\"flex-grow bg-gray-200 focus:bg-white\",on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.saveMetadata(md)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.clearMetadata(md)}]},model:{value:(md.value),callback:function ($$v) {_vm.$set(md, \"value\", $$v)},expression:\"md.value\"}}),_c('div',{staticClass:\"flex-shrink-0 flex items-center gap-2 pl-1 transition-all duration-300 ease-in-out\",class:[md.value !== md.originalValue ? 'w-12 opacity-1' : 'w-0 opacity-0']},[(!md.saving)?_vm._l((_vm.buttons),function(button){return _c('DMSTooltip',{scopedSlots:_vm._u([{key:\"activator\",fn:function(){return [_c('button',{staticClass:\"px-1 h-full leading-none\",on:{\"click\":function($event){return button.click(md)}}},[_c('font-awesome-icon',{attrs:{\"icon\":button.icon}})],1)]},proxy:true}],null,true)},[_c('span',[_vm._v(_vm._s(button.tooltip))])])}):_c('font-awesome-icon',{staticClass:\"ml-2 animate-spin\",attrs:{\"icon\":\"spinner\"}})],2)],1)])])}):_c('DMSItemsSkeleton')],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<form class=\"h-full p-4\">\r\n\t\t<template v-if=\"!loading\">\r\n\t\t\t<div\r\n\t\t\t\tv-for=\"md in metadata\"\r\n\t\t\t\t:key=\"md.name\"\r\n\t\t\t\tclass=\"flex items-center px-2 py-1 my-1 bg-gray-200 border-2 border-gray-300 rounded\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"text-lg font-medium w-1/3 flex-shrink-0\">{{ md.name }}</div>\r\n\t\t\t\t<div class=\"flex-grow\">\r\n          <a\r\n            v-if=\"md.link\"\r\n            class=\"border border-gray-300 rounded px-2 py-0.5 cursor-pointer flex items-center\"\r\n            :href=\"md.value\"\r\n            target=\"_blank\"\r\n          >\r\n            <span class=\"mr-auto\">Link</span>\r\n            <font-awesome-icon icon=\"external-link-alt\" />\r\n          </a>\r\n\t\t\t\t\t<div v-else class=\"flex items-center\">\r\n            <DMSInput\r\n              class=\"flex-grow bg-gray-200 focus:bg-white\"\r\n              v-model=\"md.value\"\r\n              @keydown.enter=\"saveMetadata(md)\"\r\n              @keydown.esc=\"clearMetadata(md)\"\r\n            />\r\n            <div\r\n              class=\"flex-shrink-0 flex items-center gap-2 pl-1 transition-all duration-300 ease-in-out\"\r\n              :class=\"[md.value !== md.originalValue ? 'w-12 opacity-1' : 'w-0 opacity-0']\"\r\n            >\r\n              <template v-if=\"!md.saving\">\r\n                <DMSTooltip v-for=\"button in buttons\">\r\n                  <template #activator>\r\n                    <button class=\"px-1 h-full leading-none\" @click=\"button.click(md)\">\r\n                      <font-awesome-icon :icon=\"button.icon\" />\r\n                    </button>\r\n                  </template>\r\n                  <span>{{ button.tooltip }}</span>\r\n                </DMSTooltip>\r\n              </template>\r\n              <font-awesome-icon\r\n                v-else\r\n                class=\"ml-2 animate-spin\"\r\n                icon=\"spinner\"\r\n              />\r\n            </div>\r\n          </div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<DMSItemsSkeleton v-else />\r\n\t</form>\r\n</template>\r\n\r\n<script>\r\n\timport DMSItemsSkeleton from \"./DMSItemsSkeleton.vue\";\r\n\timport DMSInput from \"./DMSInput.vue\";\r\n  import { getFileMetadata, setMetadata } from \"../api/files\";\r\n  import DMSTooltip from \"./DMSTooltip.vue\";\r\n\r\n\texport default {\r\n\t\tcomponents: { DMSItemsSkeleton, DMSInput, DMSTooltip },\r\n\t\tname: \"DMSFileMetadata\",\r\n\t\tprops: {\r\n\t\t\tfile: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\trequired: true,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata: () => ({\r\n\t\t\tloading: false,\r\n\t\t\tmd: []\r\n\t\t}),\r\n    computed: {\r\n      metadata: {\r\n        get() { return this.md; },\r\n        set(metadata) {\r\n          this.md = [...metadata].map(m => ({\r\n            ...m,\r\n            originalValue: m.originalValue || m.value,\r\n            saving: m.saving || false\r\n          }));\r\n        }\r\n      },\r\n      buttons: function () {\r\n        return [\r\n          { icon: \"check\", tooltip: \"Save\", click: this.saveMetadata },\r\n          { icon: \"times\", tooltip: \"Clear\", click: this.clearMetadata }\r\n        ];\r\n      }\r\n    },\r\n\t\twatch: {\r\n\t\t\tfile: {\r\n\t\t\t\timmediate: true,\r\n\t\t\t\thandler: function () {\r\n\t\t\t\t\tthis.getMetadata();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetMetadata: async function () {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\ttry {\r\n          const { metadata } = await getFileMetadata(this.file);\r\n          this.metadata = metadata;\r\n        }\r\n        catch (err) {\r\n          this.$alert(err);\r\n        }\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t},\r\n      saveMetadata: async function (metadata) {\r\n        metadata.saving = true;\r\n        try {\r\n          const md = await setMetadata(this.file, metadata.name, metadata.value);\r\n          const _metadata = [...this.metadata];\r\n          const index = _metadata.findIndex(md => md === metadata);\r\n          _metadata.splice(index, 1, md);\r\n          this.metadata = _metadata;\r\n        }\r\n        catch (err) {\r\n          this.$alert(err);\r\n        }\r\n        metadata.saving = false;\r\n      },\r\n      clearMetadata: function (metadata) {\r\n        metadata.value = metadata.originalValue;\r\n      }\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DMSFileMetadata.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DMSFileMetadata.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DMSFileMetadata.vue?vue&type=template&id=4d9eda99&scoped=true&\"\nimport script from \"./DMSFileMetadata.vue?vue&type=script&lang=js&\"\nexport * from \"./DMSFileMetadata.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d9eda99\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((Array(_vm.number)),function(x,y){return _c('div',{key:y,staticClass:\"flex my-1 bg-gray-300 border-2 border-gray-300 rounded overflow-hidden h-14 animate-pulse z-10\"})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<div\r\n\t\t\tv-for=\"(x, y) in Array(number)\"\r\n\t\t\t:key=\"y\"\r\n\t\t\tclass=\"flex my-1 bg-gray-300 border-2 border-gray-300 rounded overflow-hidden h-14 animate-pulse z-10\"\r\n\t\t></div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"DMSItemsSkeleton\",\r\n\t\tprops: {\r\n\t\t\tnumber: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 4,\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DMSItemsSkeleton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DMSItemsSkeleton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DMSItemsSkeleton.vue?vue&type=template&id=68b91cf2&scoped=true&\"\nimport script from \"./DMSItemsSkeleton.vue?vue&type=script&lang=js&\"\nexport * from \"./DMSItemsSkeleton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68b91cf2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}